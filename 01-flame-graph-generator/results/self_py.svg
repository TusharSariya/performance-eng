<?xml version="1.0" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="192" viewBox="0 0 1200 192">
<rect width="100%" height="100%" fill="#f8f8f8" />
<text x="600" y="20" font-size="16" font-family="sans-serif" text-anchor="middle" fill="#333">Self-Profile (Python)</text>
<text x="600" y="36" font-size="11" font-family="sans-serif" text-anchor="middle" fill="#888">158 samples. Click to focus, Ctrl+F to search, Esc to reset.</text>
<text id="reset-btn" x="1140" y="20" font-size="11" font-family="sans-serif" fill="#4477cc">[Reset]</text>
<text id="search-match" x="4" y="170" font-size="11" font-family="monospace" fill="#cc4444"></text>
<text id="details" x="4" y="186" font-size="11" font-family="monospace" fill="#333"></text>
<g id="f0" class="fg">
<title>root (158 samples, 100.0%)</title>
<rect x="10.0" y="146.0" width="1180.0" height="15" fill="rgb(200,200,200)" rx="1" ry="1" class="frame" data-name="root" />
<text x="13.0" y="158.0" font-size="11" font-family="monospace" fill="#000">root</text>
</g>
<g id="f1" class="fg">
<title>_start (158 samples, 100.0%)</title>
<rect x="10.0" y="130.0" width="1180.0" height="15" fill="rgb(217,173,45)" rx="1" ry="1" class="frame" data-name="_start" />
<text x="13.0" y="142.0" font-size="11" font-family="monospace" fill="#000">_start</text>
</g>
<g id="f2" class="fg">
<title>__libc_start_main (158 samples, 100.0%)</title>
<rect x="10.0" y="114.0" width="1180.0" height="15" fill="rgb(253,126,49)" rx="1" ry="1" class="frame" data-name="__libc_start_main" />
<text x="13.0" y="126.0" font-size="11" font-family="monospace" fill="#000">__libc_start_main</text>
</g>
<g id="f3" class="fg">
<title>main (158 samples, 100.0%)</title>
<rect x="10.0" y="98.0" width="1180.0" height="15" fill="rgb(237,58,39)" rx="1" ry="1" class="frame" data-name="main" />
<text x="13.0" y="110.0" font-size="11" font-family="monospace" fill="#000">main</text>
</g>
<g id="f4" class="fg">
<title>run_workload (158 samples, 100.0%)</title>
<rect x="10.0" y="82.0" width="1180.0" height="15" fill="rgb(204,173,40)" rx="1" ry="1" class="frame" data-name="run_workload" />
<text x="13.0" y="94.0" font-size="11" font-family="monospace" fill="#000">run_workload</text>
</g>
<g id="f5" class="fg">
<title>compute_cold (20 samples, 12.7%, self: 12.7%)</title>
<rect x="10.0" y="66.0" width="149.4" height="15" fill="rgb(203,151,43)" rx="1" ry="1" class="frame" data-name="compute_cold" />
<text x="13.0" y="78.0" font-size="11" font-family="monospace" fill="#000">compute_cold</text>
</g>
<g id="f6" class="fg">
<title>compute_hot (138 samples, 87.3%, self: 87.3%)</title>
<rect x="159.4" y="66.0" width="1030.6" height="15" fill="rgb(233,233,41)" rx="1" ry="1" class="frame" data-name="compute_hot" />
<text x="162.4" y="78.0" font-size="11" font-family="monospace" fill="#000">compute_hot</text>
</g>

<script type="text/javascript">
<![CDATA[
(function() {
    var frames = document.querySelectorAll('.frame');
    var details = document.getElementById('details');
    var searchMatch = document.getElementById('search-match');
    var zoomStack = [];

    // Hover effects
    frames.forEach(function(f) {
        f.style.cursor = 'pointer';
        f.addEventListener('mouseover', function() {
            f.style.stroke = '#000';
            f.style.strokeWidth = '0.5';
            var t = f.parentNode.querySelector('title');
            if (t && details) details.textContent = t.textContent;
        });
        f.addEventListener('mouseout', function() {
            f.style.stroke = 'none';
            if (details) details.textContent = '';
        });

        // Click to zoom
        f.addEventListener('click', function() {
            var name = f.getAttribute('data-name');
            if (!name) return;
            zoomToFrame(name);
        });
    });

    function zoomToFrame(name) {
        // Highlight matching frames
        var matched = 0, total = 0;
        frames.forEach(function(f) {
            total++;
            var n = f.getAttribute('data-name');
            if (n === name) {
                f.style.opacity = '1';
                f.style.stroke = '#000';
                f.style.strokeWidth = '1';
                matched++;
            } else {
                f.style.opacity = '0.4';
                f.style.stroke = 'none';
            }
        });
        if (searchMatch) searchMatch.textContent = 'Focused: ' + name + ' (' + matched + ' frames)';
        zoomStack.push(name);
    }

    function resetView() {
        frames.forEach(function(f) {
            f.style.opacity = '1';
            f.style.stroke = 'none';
        });
        if (searchMatch) searchMatch.textContent = '';
        zoomStack = [];
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Ctrl+F: search
        if (e.ctrlKey && e.key === 'f') {
            e.preventDefault();
            var term = prompt('Search function name:');
            if (!term) { resetView(); return; }
            term = term.toLowerCase();
            var matched = 0;
            frames.forEach(function(f) {
                var t = f.parentNode.querySelector('title');
                if (t && t.textContent.toLowerCase().indexOf(term) >= 0) {
                    f.style.opacity = '1';
                    matched++;
                } else {
                    f.style.opacity = '0.3';
                }
            });
            if (searchMatch) searchMatch.textContent = 'Search: "' + term + '" (' + matched + ' matches)';
        }
        // Escape: reset
        if (e.key === 'Escape') {
            resetView();
        }
    });

    // Reset button
    var resetBtn = document.getElementById('reset-btn');
    if (resetBtn) {
        resetBtn.addEventListener('click', resetView);
        resetBtn.style.cursor = 'pointer';
    }
})();
]]>
</script>
</svg>
